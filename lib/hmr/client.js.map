{"version":3,"sources":["../../src/hmr/client.js"],"names":[],"mappings":";;;;8BAA2B,kBAAkB;;;;yBACvB,YAAY;;;;AAElC,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;AAElD,IAAM,MAAM,GAAG,iCAAe,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,EAAE;AACxD,MAAI,EAAE,IAAI,CAAC,IAAI;CAChB,CAAC,CAAC;;AAEH,IAAI,WAAW,GAAG,EAAE,CAAC;;AAErB,IAAI,MAAM,GAAG,SAAT,MAAM,GAAS;AACjB,SAAO,CAAC,IAAI,wCAAsC,WAAW,SAAM,CAAC;;AAEpE,QAAM,CAAC,WAAW,sBAAoB,WAAW,EAAI,GAAG,CAAC,CAAC;CAC3D,CAAC;;AAEF,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE;SAAM,OAAO,CAAC,IAAI,4BAA0B,IAAI,CAAC,IAAI,QAAG,IAAI,CAAC,IAAI,QAAG,IAAI,CAAC,SAAS,CAAG;CAAA,CAAC,CAAC;;AAE5G,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE;SAAM,OAAO,CAAC,IAAI,CAAC,yCAAyC,CAAC;CAAA,CAAC,CAAC;;AAEhF,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE;SAAM,OAAO,CAAC,IAAI,CAAC,2CAA2C,CAAC;CAAA,CAAC,CAAC;;AAEtF,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAI;SAAK,WAAW,GAAG,IAAI;CAAA,CAAC,CAAC;;AAEhD,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE;SAAM,OAAO,CAAC,IAAI,CAAC,0BAA0B,CAAC;CAAA,CAAC,CAAC;;AAEvE,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,YAAM;AACzB,SAAO,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;AACzD,QAAM,EAAE,CAAC;CACV,CAAC,CAAC;;AAEH,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,UAAC,QAAQ,EAAK;AAClC,SAAO,CAAC,IAAI,CAAC,sCAAsC,CAAC,CAAC;;AAErD,OAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,WAAO,CAAC,IAAI,CAAC,4BAAU,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;GACtC;;AAED,QAAM,EAAE,CAAC;CACV,CAAC,CAAC;;AAEH,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAC,MAAM,EAAK;AAC9B,SAAO,CAAC,KAAK,CAAC,oCAAoC,CAAC,CAAC;;AAEpD,OAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACtC,WAAO,CAAC,KAAK,CAAC,4BAAU,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;GACrC;;AAED,QAAM,EAAE,CAAC;CACV,CAAC,CAAC;;AAEH,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,YAAM;AAC5B,SAAO,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;CACvC,CAAC,CAAC","file":"client.js","sourcesContent":["import socketIoClient from 'socket.io-client';\nimport stripAnsi from 'strip-ansi';\n\nconst opts = JSON.parse(__resourceQuery.slice(1));\n\nconst socket = socketIoClient(opts.root + opts.namespace, {\n  path: opts.path\n});\n\nlet currentHash = '';\n\nlet reload = () => {\n  console.info(`[WB-HMR] Triggering HMR with hash ${currentHash}...`);\n\n  window.postMessage(`webpackHotUpdate${currentHash}`, '*');\n};\n\nsocket.on('connect', () => console.info(`[WB-HMR] Connected to ${opts.root}${opts.path}${opts.namespace}`));\n\nsocket.on('hot', () => console.info('[WB-HMR] Hot Module Replacement enabled'));\n\nsocket.on('invalid', () => console.info('[WB-HMR] Changes detected. Recompiling...'));\n\nsocket.on('hash', (hash) => currentHash = hash);\n\nsocket.on('no-change', () => console.info('[WB-HMR] Nothing changed'));\n\nsocket.on('success', () => {\n  console.info('[WB-HMR] Compiler completed successfully');\n  reload();\n});\n\nsocket.on('warnings', (warnings) => {\n  console.warn('[WB-HMR] Warnings while compiling...');\n\n  for (let i = 0; i < warnings.length; i++) {\n    console.warn(stripAnsi(warnings[i]));\n  }\n\n  reload();\n});\n\nsocket.on('errors', (errors) => {\n  console.error('[WB-HMR] Errors while compiling...');\n\n  for (let i = 0; i < errors.length; i++) {\n    console.error(stripAnsi(errors[i]));\n  }\n\n  reload();\n});\n\nsocket.on('disconnect', () => {\n  console.warn('[WB-HMR] Disconnected');\n});"]}