{"version":3,"sources":["../../src/hmr/client.js"],"names":[],"mappings":";;;;8BAA2B,kBAAkB;;;;yBACvB,YAAY;;;;AAElC,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;AAElD,IAAM,MAAM,GAAG,iCAAe,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,EAAE;AACxD,MAAI,EAAE,IAAI,CAAC,IAAI;CAChB,CAAC,CAAC;;AAEH,IAAI,WAAW,GAAG,EAAE,CAAC;;AAErB,IAAI,MAAM,GAAG,SAAT,MAAM,GAAS;AACjB,SAAO,CAAC,IAAI,CAAC,qCAAqC,GAAG,WAAW,GAAG,KAAK,CAAC,CAAC;;AAE1E,QAAM,CAAC,WAAW,CAAC,kBAAkB,GAAG,WAAW,EAAE,GAAG,CAAC,CAAC;CAC3D,CAAC;;AAEF,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE;SAAM,OAAO,CAAC,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;CAAA,CAAC,CAAC;;AAE7G,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE;SAAM,OAAO,CAAC,IAAI,CAAC,0CAA0C,CAAC;CAAA,CAAC,CAAC;;AAEjF,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE;SAAM,OAAO,CAAC,IAAI,CAAC,4CAA4C,CAAC;CAAA,CAAC,CAAC;;AAEvF,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAI;SAAK,WAAW,GAAG,IAAI;CAAA,CAAC,CAAC;;AAEhD,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE;SAAM,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC;CAAA,CAAC,CAAC;;AAExE,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,YAAM;AACzB,SAAO,CAAC,IAAI,CAAC,2CAA2C,CAAC,CAAC;AAC1D,QAAM,EAAE,CAAC;CACV,CAAC,CAAC;;AAEH,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,UAAC,QAAQ,EAAK;AAClC,SAAO,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC;;AAEtD,OAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,WAAO,CAAC,IAAI,CAAC,4BAAU,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;GACtC;;AAED,QAAM,EAAE,CAAC;CACV,CAAC,CAAC;;AAEH,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAC,MAAM,EAAK;AAC9B,SAAO,CAAC,KAAK,CAAC,qCAAqC,CAAC,CAAC;;AAErD,OAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACtC,WAAO,CAAC,KAAK,CAAC,4BAAU,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;GACrC;;AAED,QAAM,EAAE,CAAC;CACV,CAAC,CAAC;;AAEH,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,YAAM;AAC5B,SAAO,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;CACxC,CAAC,CAAC","file":"client.js","sourcesContent":["import socketIoClient from 'socket.io-client';\nimport stripAnsi from 'strip-ansi';\n\nconst opts = JSON.parse(__resourceQuery.slice(1));\n\nconst socket = socketIoClient(opts.root + opts.namespace, {\n  path: opts.path\n});\n\nlet currentHash = '';\n\nlet reload = () => {\n  console.info('[WPW-HMR] Triggering HMR with hash ' + currentHash + '...');\n\n  window.postMessage('webpackHotUpdate' + currentHash, '*');\n};\n\nsocket.on('connect', () => console.info('[WPW-HMR] Connected to ' + opts.root + opts.path + opts.namespace));\n\nsocket.on('hot', () => console.info('[WPW-HMR] Hot Module Replacement enabled'));\n\nsocket.on('invalid', () => console.info('[WPW-HMR] Changes detected. Recompiling...'));\n\nsocket.on('hash', (hash) => currentHash = hash);\n\nsocket.on('no-change', () => console.info('[WPW-HMR] Nothing changed'));\n\nsocket.on('success', () => {\n  console.info('[WPW-HMR] Compiler completed successfully');\n  reload();\n});\n\nsocket.on('warnings', (warnings) => {\n  console.warn('[WPW-HMR] Warnings while compiling...');\n\n  for (let i = 0; i < warnings.length; i++) {\n    console.warn(stripAnsi(warnings[i]));\n  }\n\n  reload();\n});\n\nsocket.on('errors', (errors) => {\n  console.error('[WPW-HMR] Errors while compiling...');\n\n  for (let i = 0; i < errors.length; i++) {\n    console.error(stripAnsi(errors[i]));\n  }\n\n  reload();\n});\n\nsocket.on('disconnect', () => {\n  console.warn('[WPW-HMR] Disconnected');\n});"]}