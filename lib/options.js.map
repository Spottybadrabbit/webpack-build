{"version":3,"sources":["../src/options.js"],"names":[],"mappings":";;;;;;;;sBAAmB,QAAQ;;;;oBACV,MAAM;;;;sBACT,QAAQ;;;;uBACE,YAAY;;;;AAEpC,IAAM,OAAO,GAAG;AACd,UAAQ,EAAE;AACR,UAAM,EAAE,EAAE;;;AAGV,SAAK,EAAE,IAAI;AACX,oBAAgB,EAAE,GAAG;AACrB,QAAI,EAAE,SAAS;;;AAGf,OAAG,EAAE,EAAE;AACP,cAAU,EAAE,EAAE;AACd,cAAU,EAAE,EAAE;;;AAGd,cAAU,EAAE,EAAE;AACd,aAAS,EAAE,EAAE;;;AAGb,SAAK,EAAE,IAAI;AACX,YAAQ,EAAE,kBAAK,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,gBAAgB,CAAC;;;AAGpD,OAAG,EAAE,KAAK;AACV,WAAO,EAAE,EAAE;AACX,WAAO,EAAE,kBAAkB;;;AAG3B,QAAI,EAAE,EAAE;AACR,aAAS,EAAE,EAAE;AACb,gBAAY,EAAE,EAAE;GACjB;AACD,UAAQ,EAAE,kBAAS,IAAI,EAAE;AACvB,QAAI,GAAG,IAAI,IAAI,EAAE,CAAC;;AAElB,QAAI,GAAG,oBAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;;AAEvC,QAAI,IAAI,CAAC,SAAS,IAAI,CAAC,oBAAE,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE;AACtD,UAAI,CAAC,SAAS,IAAI,GAAG,CAAC;KACvB;;AAED,QAAI,IAAI,CAAC,UAAU,IAAI,CAAC,oBAAE,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE;AACxD,UAAI,CAAC,UAAU,IAAI,GAAG,CAAC;KACxB;;AAED,QAAI,CAAC,IAAI,CAAC,IAAI,EAAE;AACd,UAAI,YAAY,GAAG,oBAAE,IAAI,CAAC,IAAI,EAAE,oBAAE,QAAQ,CAAC,CAAC;AAC5C,UAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;AACxC,UAAI,OAAO,GAAG,IAAI,GAAG,qBAAY,OAAO,CAAC;AACzC,UAAI,CAAC,IAAI,GAAG,oBAAO,UAAU,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;KACpE;;AAED,QAAI,CAAC,IAAI,CAAC,SAAS,EAAE;AACnB,UAAI,CAAC,SAAS,GAAG,kBAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC;KAChE;;AAED,QAAI,IAAI,CAAC,OAAO,IAAI,oBAAE,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE;AACjD,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KAC1C;;AAED,QAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AACtB,UAAI,CAAC,YAAY,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;KACrC;;AAED,WAAO,IAAI,CAAC;GACb;CACF,CAAC;;qBAEa,OAAO","file":"options.js","sourcesContent":["import crypto from 'crypto';\nimport path from 'path';\nimport _ from 'lodash';\nimport packageJson from '../package';\n\nconst options = {\n  defaults: {\n    config: '',\n\n    // Watching\n    watch: true,\n    aggregateTimeout: 200,\n    poll: undefined,\n\n    // Config manipulation\n    env: '',\n    outputPath: '',\n    publicPath: '',\n\n    // External system integration\n    staticRoot: '',\n    staticUrl: '',\n\n    // Caching\n    cache: true,\n    cacheDir: path.join(process.cwd(), '.webpack_cache'),\n\n    // Hot module replacement\n    hmr: false,\n    hmrRoot: '',\n    hmrPath: '/__webpack_hmr__',\n\n    // Created in `generate`\n    hash: '',\n    cacheFile: '',\n    hmrNamespace: ''\n  },\n  generate: function(opts) {\n    opts = opts || {};\n\n    opts = _.defaults(opts, this.defaults);\n\n    if (opts.staticUrl && !_.endsWith(opts.staticUrl, '/')) {\n      opts.staticUrl += '/';\n    }\n\n    if (opts.publicPath && !_.endsWith(opts.publicPath, '/')) {\n      opts.publicPath += '/';\n    }\n\n    if (!opts.hash) {\n      let serializable = _.omit(opts, _.isObject);\n      let json = JSON.stringify(serializable);\n      let content = json + packageJson.version;\n      opts.hash = crypto.createHash('md5').update(content).digest('hex');\n    }\n\n    if (!opts.cacheFile) {\n      opts.cacheFile = path.join(opts.cacheDir, opts.hash + '.json');\n    }\n\n    if (opts.hmrRoot && _.endsWith(opts.hmrRoot, '/')) {\n      opts.hmrRoot = opts.hmrRoot.slice(0, -1);\n    }\n\n    if (!opts.hmrNamespace) {\n      opts.hmrNamespace = '/' + opts.hash;\n    }\n\n    return opts;\n  }\n};\n\nexport default options;\n"]}